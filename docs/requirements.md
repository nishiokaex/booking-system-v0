# 要件定義書

## 1. 概要

### 1.1 プロジェクトの背景と目的
本プロジェクトは、事業者（例: 店舗オーナー、サービス提供者）がスマートフォンアプリを操作することで、Web上にカスタマイズされた予約ページを自動生成するプロトタイプシステムを開発するものです。事業者はアプリを通じて予約ページの設定（サービス内容、時間帯、空き状況など）を容易に行え、顧客（エンドユーザー）は生成されたWeb予約ページからオンライン予約を行います。スマホアプリからは予約管理や顧客管理ができるものとする。Web予約ページは主にスマートフォンアクセスを前提とし、レスポンシブデザインを採用します。

**背景:**  
個人事業者にとって、従来の予約システムはパソコン必須かつ費用が高いため、導入障壁が高い。スマホで手軽に予約管理できるシステムが望まれている。

**目的:**  
- 手帳やExcelで管理している個人事業者にデジタル化による効率改善をもたらす。

### 1.2 スコープと制約事項
**インスコープ:**  
- 事業者向けスマホアプリ（予約ページ生成、予約管理、顧客管理）。  
- Web予約ページの自動生成およびホスティング。  
- 基本的な予約管理（予約受付、確認、キャンセル）。  

**アウトオブスコープ:**  
- 決済機能。
- 分析ダッシュボード。  
- オフライン予約対応。

**制約事項:**
- 技術制約: プロトタイプ版のためなるべく簡素な構成とする。Expo(React Native)、FastAPIを採用。
- データストレージ: SQLiteを想定。

---

## 2. ビジネス要件

### 2.1 ビジネス目標

### 2.2 ステークホルダー一覧

### 2.3 成功指標（KPI）

## 3. 機能要件

### 3.1 機能一覧と優先度

#### 3.1.1 FR-01: 事業者認証・アカウント管理機能 [Must]
| サブ機能ID | 機能名 | 詳細仕様 |
|------------|--------|----------|
| FR-01-01 | ユーザー登録 | メールアドレス、パスワード、事業者名での新規アカウント作成 |
| FR-01-02 | ログイン・ログアウト | メール/パスワード認証 |
| FR-01-03 | パスワード管理 | パスワード変更 |
| FR-01-04 | セッション管理 | トークンの自動更新、セッション期限管理 |
| FR-01-05 | プロファイル編集 | 事業者情報（店舗名、住所、電話番号）の編集 |
| FR-01-06 | アカウント削除 | アカウントおよび関連データの完全削除 |

#### 3.1.2 FR-02: 予約ページ生成・カスタマイズ機能 [Must]
| サブ機能ID | 機能名 | 詳細仕様 |
|------------|--------|----------|
| FR-02-01 | サービスメニュー設定 | サービス名、料金、所要時間、説明文の設定・編集 |
| FR-02-02 | 営業時間・スケジュール設定 | 曜日別営業時間、祝日・休業日設定、タイムスロット管理 |
| FR-02-03 | 予約ページデザイン設定 | テーマカラー、ロゴ画像、背景色の設定 |
| FR-02-04 | 予約条件設定 | 最大同時予約数、予約可能期間、キャンセル期限設定 |
| FR-02-05 | プレビュー機能 | 設定内容をリアルタイムでWebページとして確認 |
| FR-02-06 | URL生成・公開管理 | 一意のURL生成、ページ公開/非公開切り替え |
| FR-02-07 | SEO・メタ設定 | ページタイトル、説明文、OGP設定 |

#### 3.1.3 FR-03: Web予約受付機能 [Must]
| サブ機能ID | 機能名 | 詳細仕様 |
|------------|--------|----------|
| FR-03-01 | 空き状況表示 | カレンダー形式での空き状況リアルタイム表示 |
| FR-03-02 | 日時・サービス選択 | 利用可能なサービスと時間帯の選択インターフェース |
| FR-03-03 | 顧客情報入力フォーム | 氏名、メールアドレス、電話番号、特記事項の入力 |
| FR-03-04 | 予約内容確認画面 | 選択内容の最終確認、利用規約同意 |
| FR-03-05 | 重複・衝突チェック | 同時刻予約の防止、在庫管理 |
| FR-03-06 | 予約完了処理 | 予約データ保存、確認メール送信 |
| FR-03-07 | エラーハンドリング | 予約失敗時のエラーメッセージ表示 |

#### 3.1.4 FR-04: 予約管理機能 [Must]
| サブ機能ID | 機能名 | 詳細仕様 |
|------------|--------|----------|
| FR-04-01 | 予約一覧表示 | 日別、週別、月別ビューでの予約一覧表示 |
| FR-04-02 | 予約詳細・編集 | 予約詳細表示、時間・サービス変更機能 |
| FR-04-03 | 予約キャンセル | 単体・一括キャンセル、キャンセル理由記録 |
| FR-04-04 | 検索・フィルタ機能 | 顧客名、日付範囲、サービス種別での絞り込み |
| FR-04-05 | 予約ステータス管理 | 予約確定、キャンセル、完了ステータスの管理 |
| FR-04-06 | カレンダー表示 | 月間カレンダーでの予約状況一覧表示 |

#### 3.1.5 FR-05: 顧客管理機能 [Must]
| サブ機能ID | 機能名 | 詳細仕様 |
|------------|--------|----------|
| FR-05-01 | 顧客一覧表示 | 顧客リスト、予約回数、最終利用日での表示 |
| FR-05-02 | 顧客プロファイル管理 | 個人情報、利用履歴、メモ・タグ管理 |
| FR-05-03 | 予約履歴表示 | 顧客別の予約履歴、サービス利用パターン分析 |
| FR-05-04 | 顧客検索・フィルタ | 氏名、電話番号、メールでの検索、タグ絞り込み |

### 3.2 ユースケース

### 3.3 UI/UX要件とデザインガイドライン

#### 3.3.1 モバイルアプリデザイン

#### 3.3.2 Web予約ページデザイン

#### 3.3.3 画面構成とナビゲーションフロー

##### モバイルアプリ画面構成
```
ボトムタブナビゲーション:
│
├── ホーム (ダッシュボード)
│   └── 今日の予約一覧
│
├── 予約管理
│   ├── 予約一覧（カレンダー/リスト切り替え）
│   ├── 予約詳細・編集モーダル
│   ├── 新規予約作成
│   └── 検索・フィルター
│
├── 顧客管理
│   ├── 顧客一覧
│   └── 顧客詳細・編集
│
├── ページ管理
│   ├── ページ一覧
│   ├── ページ作成・編集
│   ├── プレビュー
│   └── 公開設定
│
└── 設定
    ├── プロファイル設定
    ├── 言語設定
    └── ログアウト
```

##### Web予約ページフロー
```
予約ページアクセス
│
├── 1. ランディングページ
│   ├── 事業者情報表示
│   ├── サービスメニュー一覧
│   └── 予約ボタン
│
├── 2. 日時選択ページ
│   ├── カレンダー表示
│   ├── 空き時間スロット表示
│   └── サービス選択
│
├── 3. 顧客情報入力ページ
│   ├── 個人情報フォーム
│   ├── 特記事項入力
│   └── 利用規約同意
│
├── 4. 予約確認ページ
│   ├── 選択内容確認
│   ├── 料金表示
│   └── 最終確定ボタン
│
└── 5. 予約完了ページ
    ├── 予約確認番号
    ├── キャンセル方法案内
    └── カレンダー登録ボタン
```
